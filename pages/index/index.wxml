<!--pages/index/index.wxml-->
<view class="container">
  <header title="{{mainTitle}}" bind:change-slide="handleSlideStatus"></header>
  <view class="body" style="height:calc(100% - {{header.totalHeight}}px)">
    <slide-menu
      menus="{{menuList}}"
      show="{{slideShow}}"
      class="slidebar {{slideShow ? 'show-slide' : ''}}"
      activeMenu="{{menuIndex}}"
      backMode="{{menuMode}}"
      bind:change="handleSlideChange"
    ></slide-menu>
    <view class="main {{mainMode == 'side' ? 'side-main' : ''}}">
      <scroll-view
        class="scroll"
        scroll-y="{{true}}"
        bindscroll="handleScroll"
        scroll-into-view="{{'block-'+slideIntoIndex}}"
        scroll-with-animation="{{true}}"
      >
        <list-block
          class="list-block"
          wx:for="{{foodList}}"
          wx:key="typename"
          id="{{'block-'+index}}"
          block="{{item}}"
          mode="{{mainMode}}"
          action="{{action}}"
          data-typename="{{item.typename}}"
          data-mode="{{item.mode}}"
          bind:switch="handleSwitchOptions"
          bind:cart="reactiveCart"
        ></list-block>
      </scroll-view>
    </view>
  </view>
  <shop-cart
    cartList="{{carts}}"
    bind:cart="reactiveCart"
  ></shop-cart>
  <option-panel
    show="{{showOptionPanel}}"
    foodData="{{optionPanelData}}"
    cartList="{{carts}}"
    bind:cart="reactiveCart"
  ></option-panel>
</view>